{"version":3,"sources":["components/Button/Button.module.css","components/Modal/Modal.module.css","components/Loader/Loader.module.css","components/Wrapper/Wrapper.module.css","components/ImageGallery/ImageGallery.module.css","Services/apiService.js","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/SearchBar/SearchBar.jsx","components/Wrapper/Wrapper.jsx","App.js","index.js","components/SearchBar/SearchBar.module.css"],"names":["module","exports","apiService","query","page","axios","get","Button","onClick","className","css","wrapper","type","Loader","modalRoot","document","querySelector","Modal","onClose","children","handleKeydown","e","code","useEffect","window","addEventListener","removeEventListener","createPortal","Overlay","currentTarget","target","ImageGalleryItem","props","hit","webformatURL","tags","showModal","item","width","src","alt","ImageGalleryItemImage","ImageGallery","useState","hits","setHits","setPage","loader","setLoader","modal","setModal","modalHit","setModalHit","prev","value","ref","useRef","current","usePrevious","autoScroll","scrollTo","top","documentElement","scrollHeight","behavior","data","loadImages","a","response","prevHits","length","toast","warn","console","log","error","undefined","largeImageURL","map","id","prevPage","Searchbar","onSubmit","setQuery","reset","SearchForm","preventDefault","trim","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Wrapper","text","autoClose","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4894571e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Button_wrapper__eM8Up\",\"Button\":\"Button_Button__3Nbwi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3pG4i\",\"Modal\":\"Modal_Modal__n3X6z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Loader_wrapper__3FkD9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"Wrapper_list__11dhx\",\"link\":\"Wrapper_link__3XbP0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__36HYM\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__pGWh-\",\"ImageGalleryItemImage\":\"ImageGallery_ImageGalleryItemImage__1iFpP\"};","import axios from 'axios';\n\nconst API_KEY = '22450906-3e002c9d2b529a68e38cedb68';\nconst URL = 'https://pixabay.com/api/?q=';\n\nfunction apiService(query, page) {\n  return axios.get(\n    `${URL}${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n}\n\nexport default apiService;\n","import PropTypes from 'prop-types';\nimport css from './Button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <div className={css.wrapper}>\n      <button type=\"button\" className={css.Button} onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\nexport default Button;\n","import LoaderInstance from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport css from './Loader.module.css';\n\nfunction Loader() {\n  return (\n    <div className={css.wrapper}>\n      <LoaderInstance />;\n    </div>\n  );\n}\n\nexport default Loader;\n","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport css from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nfunction Modal({ onClose, children }) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeydown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  });\n\n  function handleKeydown(e) {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  }\n\n  function handleBackdropClick(e) {\n    if (e.currentTarget === e.target) {\n      onClose();\n    }\n  }\n\n  return createPortal(\n    <div className={css.Overlay} onClick={handleBackdropClick}>\n      <div className={css.Modal}>{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  children: PropTypes.node,\n};\n\nexport default Modal;\n","import PropTypes from 'prop-types';\nimport css from './ImageGallery.module.css';\n\nfunction ImageGalleryItem(props) {\n  const { webformatURL, tags } = props.hit;\n  const { showModal } = props;\n\n  return (\n    <li className={css.item}>\n      <img\n        width=\"600\"\n        src={webformatURL}\n        alt={tags}\n        className={css.ImageGalleryItemImage}\n        onClick={() => showModal(props.hit)}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  hit: PropTypes.object,\n  showModal: PropTypes.func,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport { useEffect, useRef, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport apiService from '../../Services/apiService';\nimport Button from '../Button/Button';\nimport Loader from '../Loader/Loader';\nimport Modal from '../Modal/Modal';\nimport css from './ImageGallery.module.css';\nimport ImageGalleryItem from './ImageGalleryItem';\n\nfunction ImageGallery({ query }) {\n  const [hits, setHits] = useState([]);\n  const [page, setPage] = useState(1);\n  const [loader, setLoader] = useState(false);\n  const [modal, setModal] = useState(false);\n  const [modalHit, setModalHit] = useState({});\n\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n  const prev = usePrevious({ query, page });\n\n  useEffect(() => {\n    if (!query || prev === undefined) {\n      return;\n    }\n\n    if (prev.page !== page && page > 1) {\n      loadImages();\n    }\n\n    if (prev.query !== query) {\n      resetState();\n      loadImages();\n    }\n\n    async function loadImages() {\n      try {\n        setLoader(true);\n\n        const response = await apiService(query, page);\n\n        if (prev.page !== page && page > 1) {\n          setHits(prevHits => [...prevHits, ...response.data.hits]);\n          autoScroll();\n        } else {\n          setHits(response.data.hits);\n        }\n\n        if (response.data.hits.length === 0) {\n          return toast.warn('Oops, such item has not found');\n        }\n      } catch (error) {\n        console.log(error);\n        return toast.error('Error while loading data. Try again later');\n      } finally {\n        setLoader(false);\n      }\n    }\n  }, [page, prev, query]);\n\n  function autoScroll() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  function incrementPage() {\n    setPage(prevPage => prevPage + 1);\n  }\n\n  function resetState() {\n    setHits([]);\n    setPage(1);\n  }\n\n  function showModal(data) {\n    setModal(true);\n    setModalHit(data);\n  }\n\n  function hideModal() {\n    setModal(false);\n    setModalHit({});\n  }\n\n  return (\n    <main>\n      {loader && <Loader />}\n      {modal && (\n        <Modal onClose={hideModal}>\n          <img src={modalHit.largeImageURL} alt={modalHit.tags} />\n        </Modal>\n      )}\n      <ul className={css.ImageGallery}>\n        {hits.map(hit => (\n          <ImageGalleryItem\n            key={hit.id}\n            hit={hit}\n            className={css.ImageGalleryItem}\n            showModal={showModal}\n          />\n        ))}\n      </ul>\n      {hits.length >= 12 && <Button onClick={incrementPage} />}\n    </main>\n  );\n}\n\nImageGallery.propTypes = {\n  query: PropTypes.string,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport css from './SearchBar.module.css';\n\nfunction Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleChange = e => {\n    setQuery(e.currentTarget.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      return toast.warn('Empty request - please input a query');\n    }\n    onSubmit(query);\n    reset();\n  };\n\n  const reset = () => {\n    setQuery('');\n  };\n\n  return (\n    <header className={css.Searchbar}>\n      <form className={css.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={css.SearchFormButton}>\n          <span className={css.SearchFormButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={css.SearchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={query}\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n\nexport default Searchbar;\n","import { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport Searchbar from '../SearchBar/SearchBar';\nimport css from './Wrapper.module.css';\n\nfunction Wrapper() {\n  const [query, setQuery] = useState('');\n\n  const updateQuery = text => {\n    setQuery(text);\n  };\n\n  return (\n    <div className={css.wrapper}>\n      <Searchbar onSubmit={updateQuery} />\n      <ImageGallery query={query} />\n      <ToastContainer autoClose={3000} />\n    </div>\n  );\n}\n\nexport default Wrapper;\n","import Wrapper from './components/Wrapper/Wrapper';\n\nfunction App() {\n  return <Wrapper />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__zFQek\",\"SearchForm\":\"SearchBar_SearchForm__djcUP\",\"SearchFormButton\":\"SearchBar_SearchFormButton__X6IqO\",\"SearchFormButtonLabel\":\"SearchBar_SearchFormButtonLabel__2N7n-\",\"SearchFormInput\":\"SearchBar_SearchFormInput__1_1Vh\"};"],"sourceRoot":""}